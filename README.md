# 智能储物柜方案设计



## 1. 产品结构

方案分为**控制机构**和**动作机构**两部分。

*控制机构*发出控制指令，*动作机构*接收控制指令完成动作执行。

### 1.1 控制机构

控制机构部分选用树莓派+自行设计的74LS138控制电路实现可扩展的多路控制


#### 1.1.1 控制器
**选型要求**

- 控制GPIO简单可靠、具有一定的计算力、可用软体资源丰富、安全性好

**Raspberry Pi**

- (中文名为“树莓派”,简写为RPi，或者RasPi/RPi)是为学生计算机编程教育而设计
- 只有信用卡大小的卡片式电脑，其系统基于Linux。
-  随着Windows 10 IoT的发布，我们也将可以用上运行Windows的树莓派。 
- 自问世以来，受众多计算机发烧友和创客的追捧，曾经一“派”难求。
- 别看其外表“娇小”，内“心”却很强大，视频、音频等功能通通皆有，可谓是“麻雀虽小，五脏俱全”。


#### 1.1.2 控制电路

**设计要求**

- 简单可靠、可扩展性好

**74LS138**

- 当一个选通端E1-3选通的情况下，可将地址端A0-2的二进制编码在Y0-7对应的输出端以低电平译出。
- 若外接一个反相器还可级联扩展成 32 线译码器。
- 若将选通端中的一个作为数据输入端时，74LS138还可作数据分配器。

### 1.2 动作机构

**动作机构**主要由**电磁锁**、**非电开锁机构**组成


#### 1.2.1 电磁锁机构

**选型要求**

- 有弹出装置、工作功耗稳定、故障率低

**线圈式电磁锁**


- 使用线圈式电磁锁，结构简单功耗低

#### 1.2.2 非电开锁机构

- 紧急情况下的开锁方式

---

## 2. 业务流程

系统使用flask框架搭建的嵌入式web服务器。
用户只需使用手机浏览器进行操作便可实现存包和取包的便捷操作。

### 2.1 存业务

1. 浏览器界面点击存
1.	柜门会自动打开
1.	物品存入
1.	闭合柜门

### 2.2 取业务

1.	界面点击所存柜子
1.	柜门会自动打开
1.	物品取出
1.	闭合柜门

## 3. 物理连接

1. 物理连接对应表

	![](http://chuantu.biz/t3/14/1460797352x3738746559.png)

	使用BCM编码的pin映射方式来控制 138译码器的使能、地址线
控制映射如下

	```json
	 {E:21, A0:20,A1:16,A2:12}
	```

1.  扩展138译码器

	![](http://e.hiphotos.baidu.com/baike/c0%3Dbaike72%2C5%2C5%2C72%2C24/sign=613fd67a20a446236ac7ad30f94b196b/dc54564e9258d109bfc305b2d158ccbf6c814d89.jpg)

1.  扩流板连接关系

	 ![](http://chuantu.biz/t3/14/1460797317x3738746559.jpg)   
	arduino的IO和GND对应接入扩展138产生的输出线路（Y0～Y7,GND）   
	由于电磁锁使用 12V电源驱动 因而扩流板输入电源接12V输入以满足控制要求


